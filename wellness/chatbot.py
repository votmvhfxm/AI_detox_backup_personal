# wellness/chatbot.py
# - 규칙 기반 감정 분류와 감정별 코칭 문구 테이블

EMOTION_KEYWORDS = {
    # "키워드" : "감정레이블"
    "피곤": "피로", "지침": "피로", "졸려": "피로",
    "무기력": "무기력", "하기 싫": "무기력", "의욕 없": "무기력",
    "우울": "우울", "슬프": "우울",
    "불안": "불안", "걱정": "불안", "초조": "불안",
    "편안": "안정", "괜찮": "안정", "평온": "안정",
    "기분 좋": "활력", "컨디션 좋": "활력", "상쾌": "활력",
}

def classify_emotion(text: str) -> str | None:
    """
    간단한 키워드 매칭으로 감정을 분류.
    - 매칭 실패 시 None 반환(→ 상위 로직에서 모델로 분류하는 fallback 지점)
    """
    t = text.lower()
    for k, v in EMOTION_KEYWORDS.items():
        if k in t:
            return v
    return None

def coaching_for(emotion: str) -> str:
    """감정에 맞춘 간단한 코칭 문구 반환"""
    table = {
        "피로": "잠깐 폰을 내려두고 5분 휴식이나 스트레칭을 해보세요.",
        "무기력": "아주 작은 할 일 1개만 정해서 실행해보는 건 어떨까요?",
        "우울": "햇빛을 쬐며 10분 산책이 도움이 될 수 있어요.",
        "불안": "1분 복식 호흡으로 긴장을 낮춰보세요.",
        "안정": "지금의 안정된 리듬을 유지해볼까요?",
        "활력": "25분 집중 블록을 설정하고 몰입해보세요!",
    }
    return table.get(emotion, "오늘 컨디션에 맞게 천천히 시작해볼까요?")
